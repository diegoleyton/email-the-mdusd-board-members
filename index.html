<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Email the MDUSD Board Members</title>
<link rel="icon" type="image/png" href="logo.png">

<style>
:root{
  --bg:#f3f7ff;
  --text:#0f172a;
  --muted:#475569;
  --border:#dbeafe;
  --blue:#1d4ed8;
  --dangerBorder:#fecaca;
  --dangerBg:#fff1f2;
  --dangerText:#7f1d1d;
  --hintBg:#eff6ff;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:#fff;
  color:var(--text);
}

.page{
  max-width:920px;
  margin:auto;
  padding:18px;
}

.wrap{
  background:var(--bg);
  padding:18px;
  border-radius:16px;
  border:1px solid var(--border);
}

.titleBlock{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-bottom:12px;
}

.titleLogo{
  width:240px;
  height:90px;
  object-fit:contain;
  margin-inline:auto;
}

.title{
  font-size:22px;
  margin:0;
  text-align:left;
}

.card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:16px;
  padding:16px;
}

label{
  font-size:13px;
  color:var(--muted);
  display:block;
  margin-top:12px;
}

input, select{
  width:100%;
  padding:12px;
  margin-top:6px;
  border-radius:12px;
  border:1px solid #c7d7ff;
  background:#f9fbff;
  font-size:16px;
  outline:none;
}

input::placeholder{ color:#94a3b8; opacity:1; }

input:focus, select:focus{
  border-color:#93c5fd;
  box-shadow:0 0 0 3px rgba(37,99,235,.14);
}

.warning{
  display:none;
  margin-top:8px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--dangerBorder);
  background:var(--dangerBg);
  color:var(--dangerText);
  font-size:13px;
  line-height:1.35;
}
.warning.show{display:block;}

.needsField{ border-color:#fca5a5 !important; }

.hint{
  margin-top:8px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--hintBg);
  color:var(--muted);
  font-size:12px;
  line-height:1.35;
}

.subtitle{
  margin-top:12px;
  color:var(--muted);
  font-size:14px;
  line-height:1.5;
}

.gmailToggle{
  margin-top:14px;
  width:100%;
}

.gmailToggle label{
  display:grid;
  grid-template-columns: 22px 1fr;
  align-items:start;
  column-gap:10px;
  cursor:pointer;
  margin:0;
  width:100%;
}

.gmailToggle input[type="checkbox"]{
  width:18px;
  height:18px;
  margin:2px 0 0 0;
  justify-self:start;
}

.gmailToggle .toggleText{
  line-height:1.25;
  color:var(--muted);
  font-size:13px;
}

.sendWrap{ margin-top:16px; }

.sendBtn{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--blue);
  color:#fff;
  cursor:pointer;
  font-size:16px;
  font-weight:700;
  transition:.15s;
}
.sendBtn:hover{ filter:brightness(.97); }
.sendBtn:disabled{ opacity:.55; cursor:not-allowed; }

.helper{
  margin-top:10px;
  font-size:12px;
  color:var(--muted);
  line-height:1.4;
}
</style>
</head>

<body>
<div class="page">
  <div class="wrap">

    <div class="titleBlock">
      <img class="titleLogo" src="logo2.png" alt="logo">
      <h2 class="title" id="pageTitle">Email the MDUSD Board Members</h2>
    </div>

    <!-- Language selector FIRST thing after title -->
    <div class="card" style="margin-bottom:12px;">
      <label id="lblLang">Language/Idioma</label>
      <select id="lang">
        <option value="en">English</option>
        <option value="es">Español</option>
      </select>

      <!-- Tooltip / hint BELOW language selector -->
      <div class="hint" id="langHint"></div>
    </div>

    <div class="subtitle" id="subtitle"></div>

    <div class="card">

      <label id="lblName">Your Name</label>
      <input id="senderName" placeholder="Your name" autocomplete="name">

      <div class="warning" id="nameWarning"></div>

      <label id="lblConn">Your Connection to MDUSD</label>
      <select id="connection"></select>

      <div class="warning" id="connectionWarning"></div>

      <div class="gmailToggle" id="gmailToggle">
        <label>
          <input type="checkbox" id="gmailCheck">
          <span class="toggleText" id="gmailToggleText"></span>
        </label>
      </div>

      <div class="sendWrap">
        <button class="sendBtn" id="sendBtn" disabled>Generar Mensaje</button>
      </div>

      <div class="helper" id="helperText"></div>

    </div>
  </div>
</div>

<script>
/* =========================================================
   EMAIL CONTENT (ALWAYS IN ENGLISH)
========================================================= */

const SUBJECT = "Please Pause the Phase-Out of Spanish Dual Immersion at Bancroft";

const BASE = `Dear Superintendent Clark and Members of the Board,

I am writing as a community member and signer of the petition urging the District to pause the phase-out of the Spanish Two-Way Dual Immersion (TWDI) Program at Bancroft Elementary.

More than 400 community members have now signed in support of a pause. This level of concern reflects how deeply families value this program and how disruptive the current timeline has been.

The January 28 announcement — just days before kindergarten enrollment opened — has left families scrambling to make decisions about sibling placement, transportation, and school stability. At the Bancroft Elementary Parent-Faculty Meeting on February 10, district representatives confirmed that the decision was made without consultation with Bancroft families and without a completed analysis of enrollment or demographic impacts.

Regardless of where one stands on the program's long-term plans, decisions of this magnitude deserve transparent data, meaningful community engagement, and adequate time for families to plan.

I respectfully urge the Board to:

Pause implementation of the phase-out
Share more information about the data and analysis that informed the decision
Engage directly with Bancroft families before moving forward

A pause is not a rejection of change — it is a commitment to thoughtful governance, equity, and student stability.

Thank you for your time, service to our district, and for ensuring that decisions impacting children are made with care and transparency.`;

/* =========================================================
   RECIPIENTS (single email to everyone)
========================================================= */

const MEMBERS = [
  ["Debra Mason","masond@mdusd.org"],
  ["Keisha Nzewi","nzewik@mdusd.org"],
  ["Brian Lawrence","lawrenceb@mdusd.org"],
  ["Linda Mayo","mayol@mdusd.org"],
  ["Tom McDougall","mcdougallt@mdusd.org"],
  ["Alan Barrera Orellana","barreraorellanaa@mdusd.org"],
  ["Dr. Adam Clark","clarka@mdusd.org"],
  ["Erin DeMartini","demartinie@mdusd.org"],
  ["Kathryn Fireman","firemank@mdusd.org"]
];

const TO_EMAIL = "clarka@mdusd.org";
const BCC_EMAILS = MEMBERS.map(m => m[1]).filter(e => e !== TO_EMAIL);

/* =========================================================
   UI LANGUAGE STRINGS (form changes; email stays English)
========================================================= */

const STRINGS = {
  en: {
    pageTitle: "Email the MDUSD Board Members",
    subtitle: `Fill out the form, then click <b>Generate Message</b> to open your email with a prepared draft addressed to the Board. Please review it and send it.`,
    langHint: `Note: The email message will always be generated in <b>English</b>.`,
    lblName: "Your Name",
    namePh: "Your name",
    nameWarn: "<b>English:</b> Please enter your name.",
    lblConn: "Your Connection to MDUSD",
    connWarn: "<b>English:</b> Please select your connection to MDUSD.",
    connPlaceholder: "Select one",
    connOptions: [
      ["Parent", "Parent"],
      ["Community Member", "Community Member"],
      ["Alumni", "Alumni"],
      ["Resident", "Resident"],
      ["Family", "Family"]
    ],
    gmailToggleText: "Use Gmail website instead of your email app",
    sendBtn: "Generate Message",
    helper: `<b>Tip:</b> A draft email will open pre-filled. Please review, then press Send.`
  },
  es: {
    pageTitle: "Enviar correo al Board de MDUSD",
    subtitle: `Complete el formulario y luego presione <b>Generar Mensaje</b> para abrir su correo con un borrador listo dirigido al Board. Por favor revisar y enviar`,
    langHint: `Nota: El mensaje del correo siempre se generará en <b>inglés</b>.`,
    lblName: "Su Nombre",
    namePh: "Su nombre",
    nameWarn: "<b>Español:</b> Por favor escriba su nombre.",
    lblConn: "Su Relación con MDUSD",
    connWarn: "<b>Español:</b> Por favor seleccione su relación con MDUSD.",
    connPlaceholder: "Seleccione una",
    connOptions: [
      ["Padre o Madre", "Parent"],
      ["Miembro de la comunidad", "Community Member"],
      ["Exalumno(a)", "Alumni"],
      ["Residente", "Resident"],
      ["Familiar", "Family"],
    ],
    gmailToggleText: "Usar el sitio web de Gmail en vez de su aplicación de email",
    sendBtn: "Generar Mensaje",
    helper: `<b>Consejo:</b> Se abrirá un borrador listo. Revíselo y luego presione Enviar.`
  }
};

const nameKey = "mdusd_senderName_v1";
const langKey = "mdusd_lang_v1";

/* =========================================================
   HELPERS
========================================================= */

function getLang(){ return localStorage.getItem(langKey) || "en"; }
function setLang(v){ localStorage.setItem(langKey, v); }

function getSenderName(){
  return (document.getElementById("senderName").value || "").trim();
}
function getConnectionValue(){
  return (document.getElementById("connection").value || "").trim(); // normalized value (EN)
}

function setWarning(elId, show){
  const el = document.getElementById(elId);
  if (!el) return;
  el.classList.toggle("show", !!show);
}
function setNeedsField(fieldId, needs){
  const el = document.getElementById(fieldId);
  if (!el) return;
  el.classList.toggle("needsField", !!needs);
}

function applyLanguage(){
  const lang = getLang();
  const s = STRINGS[lang];

  document.documentElement.lang = lang;
  document.getElementById("pageTitle").textContent = s.pageTitle;
  document.getElementById("subtitle").innerHTML = s.subtitle;

  // language label is fixed requested: "Language/Idioma"
  document.getElementById("lblLang").textContent = "Language/Idioma";
  document.getElementById("langHint").innerHTML = s.langHint;

  document.getElementById("lblName").textContent = s.lblName;
  document.getElementById("senderName").placeholder = s.namePh;
  document.getElementById("nameWarning").innerHTML = s.nameWarn;

  document.getElementById("lblConn").textContent = s.lblConn;
  document.getElementById("connectionWarning").innerHTML = s.connWarn;

  document.getElementById("gmailToggleText").textContent = s.gmailToggleText;
  document.getElementById("sendBtn").textContent = s.sendBtn;
  document.getElementById("helperText").innerHTML = s.helper;

  // rebuild connection select preserving selection
  const current = getConnectionValue();
  const sel = document.getElementById("connection");
  sel.innerHTML = "";

  const ph = document.createElement("option");
  ph.value = "";
  ph.textContent = s.connPlaceholder;
  sel.appendChild(ph);

  s.connOptions.forEach(([label, value])=>{
    const o = document.createElement("option");
    o.value = value;       // normalized (EN) used in email signature
    o.textContent = label; // displayed in UI language
    sel.appendChild(o);
  });

  if (current) sel.value = current;
}

/* =========================================================
   VALIDATION
========================================================= */

function validate(){
  const nameOk = getSenderName().length > 0;
  const connOk = getConnectionValue().length > 0;

  setWarning("nameWarning", !nameOk);
  setNeedsField("senderName", !nameOk);

  setWarning("connectionWarning", !connOk);
  setNeedsField("connection", !connOk);

  document.getElementById("sendBtn").disabled = !(nameOk && connOk);
  return nameOk && connOk;
}

/* =========================================================
   EMAIL (ALWAYS ENGLISH)
========================================================= */

function buildBodyEnglish(){
  const sender = getSenderName();
  const connectionNormalized = getConnectionValue(); // EN

  return `${BASE}

Sincerely,

${sender}

${connectionNormalized}`;
}

function openEmailToAll(){
  if (!validate()) return;

  const gmail = document.getElementById("gmailCheck").checked;
  const body = buildBodyEnglish();

  if (gmail){
    const link =
      `https://mail.google.com/mail/?view=cm&fs=1` +
      `&to=${encodeURIComponent(TO_EMAIL)}` +
      `&bcc=${encodeURIComponent(BCC_EMAILS.join(","))}` +
      `&su=${encodeURIComponent(SUBJECT)}` +
      `&body=${encodeURIComponent(body)}`;

    window.open(link, "_blank");
    return;
  }

  const link =
    `mailto:${encodeURIComponent(TO_EMAIL)}` +
    `?bcc=${encodeURIComponent(BCC_EMAILS.join(","))}` +
    `&subject=${encodeURIComponent(SUBJECT)}` +
    `&body=${encodeURIComponent(body)}`;

  window.location.href = link;
}

/* =========================================================
   INIT
========================================================= */

(function init(){
  // Restore saved name
  const savedName = (localStorage.getItem(nameKey) || "").trim();
  if (savedName) document.getElementById("senderName").value = savedName;

  // Set initial language
  document.getElementById("lang").value = getLang();
  applyLanguage();

  // Events
  document.getElementById("lang").addEventListener("change", (e)=>{
    setLang(e.target.value);
    applyLanguage();
    validate();
  });

  document.getElementById("senderName").addEventListener("input", ()=>{
    localStorage.setItem(nameKey, getSenderName());
    validate();
  });

  document.getElementById("connection").addEventListener("change", validate);

  document.getElementById("sendBtn").addEventListener("click", openEmailToAll);

  // Initial validation
  validate();
})();
</script>
</body>
</html>
